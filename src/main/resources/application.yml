server:
  port: 8080

spring:
  main:
    web-application-type: reactive
  cloud:
    gateway.server.webflux:
      default-filters:
        - name: RequestRateLimiter
          args:
            key-resolver: "#{@ipKeyResolver}"
            redis-rate-limiter.replenishRate: 10
            redis-rate-limiter.burstCapacity: 20
      routes:
        - id: lab-home
          order: 100
          uri: http://lab-home:80
          predicates:
            - Path=/, /index.html, /assets/**, /icons/**, /favicon.ico

        - id: api-stress-test
          uri: http://api-stress-test:8083
          predicates:
            - Path=/api-stress-test/**
          filters:
            - name: PrefixAwareForwardingFilter
              args:
                prefix: /api-stress-test

        - id: ichiro-family-tree
          uri: http://ichiro-family-tree:8081
          predicates:
            - Path=/ichiro-family-tree/**
          filters:
            - name: PrefixAwareForwardingFilter
              args:
                prefix: /ichiro-family-tree

        - id: shortly
          uri: http://shortly:8082
          predicates:
            - Path=/shortly/**
          filters:
            - name: PrefixAwareForwardingFilter
              args:
                prefix: /shortly

        - id: ichiro-walks
          uri: http://ichiro-walks:8085
          predicates:
            - Path=/ichiro-walks/**
          filters:
            - name: PrefixAwareForwardingFilter
              args:
                prefix: /ichiro-walks
  data:
    redis:
      host: redis
      port: 6379
